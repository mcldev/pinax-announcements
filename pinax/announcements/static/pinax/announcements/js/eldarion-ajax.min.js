/**
 * eldarion-ajax - v0.17.0 - 2017-10-02
 * https://github.com/eldarion/eldarion-ajax
 * Copyright (c) 2017 Eldarion, Inc; Licensed BSD
 *
 */
!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):e.EldarionAjax=t(e.jQuery)}(this,function(e){"use strict";var t=function(){};return t.prototype._ajax=function(t,o,a,r,n){t.trigger("eldarion-ajax:begin",[t]);var c=t.triggerHandler("eldarion-ajax:modify-data",r),p="application/x-www-form-urlencoded; charset=UTF-8",s=!0,i=!0;c&&(r=c),n&&(p=!1,s=!1,i=!1),e.ajax({url:o,type:a,dataType:"json",data:r,cache:i,processData:s,contentType:p,headers:{"X-Eldarion-Ajax":!0}}).done(function(e,o,a){e||(e={}),t.trigger("eldarion-ajax:success",[t,e,o,a])}).fail(function(e,o,a){t.trigger("eldarion-ajax:error",[t,e,o,a])}).always(function(o,a,r){e(document).trigger("eldarion-ajax:complete",[t,o,a,r])})},t.prototype.click=function(o){var a=e(this),r=a.attr("href"),n=a.data("method"),c=a.data("data"),p=null,s=null;n||(n="get"),c&&(p={},c.split(",").map(function(t){0===(s=t.split(":"))[1].indexOf("#")?p[s[0]]=e(s[1]).val():p[s[0]]=s[1]})),o.preventDefault(),t.prototype._ajax(a,r,n,p)},t.prototype.submit=function(o){var a=e(this),r=a.attr("action"),n=a.attr("method")||"get";if(o.preventDefault(),void 0===window.FormData||"get"===n.toLowerCase())t.prototype._ajax(a,r,n,a.serialize());else{var c=new FormData(a[0]);void 0===c.get&&(c=a.serialize()),t.prototype._ajax(a,r,n,c,!0)}},t.prototype.cancel=function(t){var o=e(this),a=o.attr("data-cancel-closest");t.preventDefault(),o.closest(a).remove()},t.prototype.timeout=function(o,a){var r=e(a),n=r.data("timeout"),c=r.data("url"),p=r.data("method");p||(p="get"),window.setTimeout(t.prototype._ajax,n,r,c,p,null)},t.prototype.interval=function(o,a){var r=e(a),n=r.data("interval"),c=r.data("url"),p=r.data("method");p||(p="get"),window.setInterval(t.prototype._ajax,n,r,c,p,null)},t.prototype.init=function(){e("body").on("click","a.ajax",t.prototype.click),e("body").on("submit","form.ajax",t.prototype.submit),e("body").on("click","a[data-cancel-closest]",t.prototype.cancel),e("[data-timeout]").each(t.prototype.timeout),e("[data-interval]").each(t.prototype.interval)},e(function(){t.prototype.init()}),t}),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):e.EldarionAjaxHandlers=t(e.jQuery)}(this,function(e){"use strict";var t=function(){};return t.prototype.redirect=function(e,t,o){if(o.location)return window.location.href=o.location,!1},t.prototype.replace=function(t,o,a){e(o.data("replace")).replaceWith(a.html)},t.prototype.replaceClosest=function(e,t,o){t.closest(t.data("replace-closest")).replaceWith(o.html)},t.prototype.replaceInner=function(t,o,a){e(o.data("replace-inner")).html(a.html)},t.prototype.replaceClosestInner=function(e,t,o){t.closest(t.data("replace-closest-inner")).html(o.html)},t.prototype.append=function(t,o,a){e(o.data("append")).append(a.html)},t.prototype.prepend=function(t,o,a){e(o.data("prepend")).prepend(a.html)},t.prototype.refresh=function(t,o){e.each(e(o.data("refresh")),function(t,o){e.getJSON(e(o).data("refresh-url"),function(t){e(o).replaceWith(t.html)})})},t.prototype.refreshClosest=function(t,o){e.each(e(o.data("refresh-closest")),function(t,a){e.getJSON(e(a).data("refresh-url"),function(t){o.closest(e(a)).replaceWith(t.html)})})},t.prototype.clear=function(t,o){e(o.data("clear")).html("")},t.prototype.remove=function(t,o){e(o.data("remove")).remove()},t.prototype.clearClosest=function(e,t){t.closest(t.data("clear-closest")).html("")},t.prototype.removeClosest=function(e,t){t.closest(t.data("remove-closest")).remove()},t.prototype.fragments=function(t,o,a){a.fragments&&e.each(a.fragments,function(t,o){e(t).replaceWith(o)}),a["inner-fragments"]&&e.each(a["inner-fragments"],function(t,o){e(t).html(o)}),a["append-fragments"]&&e.each(a["append-fragments"],function(t,o){e(t).append(o)}),a["prepend-fragments"]&&e.each(a["prepend-fragments"],function(t,o){e(t).prepend(o)})},t.prototype.init=function(){e(document).on("eldarion-ajax:success",t.prototype.redirect),e(document).on("eldarion-ajax:success",t.prototype.fragments),e(document).on("eldarion-ajax:success","[data-replace]",t.prototype.replace),e(document).on("eldarion-ajax:success","[data-replace-closest]",t.prototype.replaceClosest),e(document).on("eldarion-ajax:success","[data-replace-inner]",t.prototype.replaceInner),e(document).on("eldarion-ajax:success","[data-replace-closest-inner]",t.prototype.replaceClosestInner),e(document).on("eldarion-ajax:success","[data-append]",t.prototype.append),e(document).on("eldarion-ajax:success","[data-prepend]",t.prototype.prepend),e(document).on("eldarion-ajax:success","[data-refresh]",t.prototype.refresh),e(document).on("eldarion-ajax:success","[data-refresh-closest]",t.prototype.refreshClosest),e(document).on("eldarion-ajax:success","[data-clear]",t.prototype.clear),e(document).on("eldarion-ajax:success","[data-remove]",t.prototype.remove),e(document).on("eldarion-ajax:success","[data-clear-closest]",t.prototype.clearClosest),e(document).on("eldarion-ajax:success","[data-remove-closest]",t.prototype.removeClosest)},e(function(){t.prototype.init()}),t});